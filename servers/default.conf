server {
    listen          80;
    server_name     localhost;
    root            /app/default;

    server_tokens   off;

    # Location block order doesn't matter
    # Order: exact match, preferential prefix, regex, and prefix

    # Exact match (has priority over all regardless of order)
    # location = /test {
    #     try_files   $uri $uri/ /index.html =404;
    # }

    # Prefix match (can be made into a preferential prefix so > regex)
    #location / {
    #    try_files   $uri $uri/ /index.html =404;
    #}

    default_type text/html;

    location /hammer {
        return 200 'prefix match';
    }

    location ~* /hammer {
        return 200 'regex insensitive match';
    }

    location /foo {
        return 200 'prefix match';
    }

    location = /foo {
        return 200 'exact match';
    }

    location ~* \.(ico|gif|jpe?g|png)$ {
        access_log off;
        expires 1M;
        add_header Cache-Control public;
        add_header Pragma public;
    }

    location ~* \.(css|js)$ {
        access_log off;
        expires 7d;
        add_header Cache-Control public;
        add_header Pragma public;
        add_header Vary Accept-Encoding;
    }

    location = /cats.jpg {
        add_header Cache-Control public;
        add_header Pragma public;
        image_filter rotate 90;
        expires 1M;
    }


    # Regex match (more impt than prefix match unless it's a preferential prefix)
    # location ~* \.(png|gif|jpg|jpeg)$ {
    #     return 403;
    # }

    # access_log      /var/log/nginx/default/access.log;
    # error_log       /var/log/nginx/default/error.log;
}